# Mini-ChatGPT 开发过程文档

## 计划阶段

### 项目信息表

| 类别 | 内容 |
| :---: | :---: |
| 项目名称 | Mini-ChatGPT |
| 项目概述 | 一个交互界面更加友好的网页聊天机器人 |
| 类型 | Web 前后端 |
| 语言 | HTML，CSS，JavaScript，TypeScript，Python |
| 框架 | Vue，Element+，Flask |

### 项目实施方案

通过 Vue 与 Element+ 实现前端，Flask 实现后端，最终实现聊天会话、聊天历史会话、聊天历史查询、热点板块、用户账户控制等等功能。

![](https://s1.ax1x.com/2023/03/12/ppMI4yV.md.png)
![](https://s1.ax1x.com/2023/03/12/ppMITwF.png)

## 需求阶段

### 客户需求

> Mini-ChatGPT  
> ChatGPT（全名：Chat Generative Pre-trained Transformer），美国OpenAI研发的聊天机器人程序 ，于2022年11月30日发布 。ChatGPT是人工智能技术驱动的自然语言处理工具，它能够通过理解和学习人类的语言来进行对话，还能根据聊天的上下文进行互动，真正像人类一样来聊天交流，甚至能完成撰写邮件、视频脚本、文案、翻译、代码，写论文等任务。  
> 本作业要求使用javascript技术，编写一个交互界面更加友好的聊天机器人。基本要求如下：  
> （1）不需要接入ChatGPT后台，也不必需采用人工智能技术进行自然语言处理。  
> （2）针对目前ChatGPT交互性为基本文本对话框的方式，进行改进。采用合适的javascript前端技术编写WEB页面，实现 自拖动、自调整布局，自动推荐补齐，历史聊天记录分类、分层次呈现，根据输入内容（几句话、一段话、一篇文章等）区分不同输入方式，等至少两种前端效果。  
> （3）后端不要求必须使用javascript，要求使用MySQL数据库存放确切的聊天答案，能够根据输入要求，输出确切的答案。对于不符合输入要求的问题，能够做出判断并拒绝回答。对于大量的并发访问需求，能够判断连接数过多（如大于5、大于10）并拒绝连接。  
> （4）按照个人软件编程习惯，形成完整的软件流程文档，记录个人软件开发过程。  
> 加分项目：  
> （1）采用成熟的前端或者后端javascript框架，加速作业的完成。  
> （2）具有热点问题排名、最多提问者排名、最佳提问等热榜。  
> （3）后端能够调用简单的Python程序，处理分词等简单的人工智能任务。  
> 3月21日公开演示答辩，答辩前将所有资料（含源代码、文档、过程素材等）发邮件给dahogn@sdu.edu.cn，大附件请发网盘链接。  

## 设计阶段

### 功能设计说明书

| 项目 | 内容 |
| :---: | :---: |
| 前端-总容器 | 使用 Vue 编写前端总容器，便于置入各种功能 |
| 前端-模块：主界面 | 开始界面，提示用户登录以及开启聊天会话 |
| 前端-模块：聊天会话 | 聊天界面，用户进行聊天的主区域，上方为聊天栏，下方为输入框及提交键，输入框支持**自动补全**，**自动根据输入行数变换形态**，**自动高度调整** |
| 前端-模块：聊天历史会话 | 以聊天会话形式展示聊天历史，位于侧边栏 |
| 前端-模块：聊天历史 | 以表格形式展示聊天历史，允许排序，筛选等操作 |
| 前端-模块：热点板块 | 以表格形式展示聊天热点，允许排序操作 |
| 前端-模块：顶栏 | Head Menu Control |
| 前端-模块：侧边栏 | Side Menu Control |
| 前端-模块：用户账户控制 | 实现账户登录以及未注册账户默认注册，进而保存用户的聊天历史记录 |
| 前端-模块：夜间模式 | 实现亮色/暗色主题切换 |
| 后端-总容器 | 使用 Flask 编写后端总服务器，便于置入各种功能以及交互 |
| 后端-模块：异步 | 异步模块 |
| 后端-模块：线程池 | 便于多线程处理任务 |
| 后端-模块：登录与会话 | 实现用户账户信息保存与验证，以及 Session 的建立与鉴权 |
| 后端-模块：MySQL 通信 | 实现与 MySQL 数据库的通信，便于查询以及修改消息、自动补全等信息 |
| 后端-模块：API | 开放 API 便于 Browser 进行 B/S 通信 |
| 后端-模块：连接数控制 | 通过 Session 控制实现连接数控制，在连接数超过最大连接数后拒绝访问 |

### 数据库设计说明书

![](https://s1.ax1x.com/2023/03/12/ppMoiYd.png)

## 开发阶段

![](https://s1.ax1x.com/2023/03/12/ppMoFfA.png)

## 测试阶段

### 测试环节 & 用例

1. 交互性测试

2. 用户账户控制测试

    | 栏目 | 内容 |
    | :---: | :---: |
    | 用户名 | Mike |
    | 密码 | 123456 |

3. 聊天机器人会话测试

    | 栏目 | 内容 |
    | :---: | :---: |
    | 内容 1 | 你和 ChatGPT 有什么联系 |
    | 内容 2 | 中文ChatGPT |
    | 内容 3 | "" |
    | 内容 4 | bgagiasngifiosanioas |

4. 聊天历史会话测试
5. 聊天历史查询/分类查询/排序测试
6. 聊天历史分类修改测试
7. 热点栏目测试
8. 夜间模式测试

### 测试报告

1. 交互性测试

    所有可交互元素均可正常工作。

2. 用户账户控制测试

    初始时数据库中不存在用户，自动注册成功。登录成功。Session 获取成功。

3. 聊天机器人会话测试

    自动补全正常。

    Scroll Bar 正常。

    内容 1：毫无联系，我只是一个能按照语料库回复的机器人罢了。  
    内容 2：According to your question, I have found something similar with keywords: For 中文: 是的，我支持。; For ChatGPT: 毫无联系，我只是一个能按照语料库回复的机器人罢了。;  
    内容 3：You need to type some words.  
    内容 4：I'm sorry but I cannot find anything similar with your keywords currently.

    消息回复全部符合预期。

    自调整布局，输入方式区分正常。

    消息异步处理正常。

    最大连接数处理正常。

4. 聊天历史会话测试

    显示正常。

    数据获取正常。

    操作鉴权正常。

    Scroll Bar 正常。

    消息分类正常。 

5. 聊天历史查询/分类查询/排序测试

    显示正常。

    数据获取正常。

    操作鉴权正常。

    排序正常。

    分类过滤正常。

6. 聊天历史分类修改测试

    Dialog 正常。

    后端数据库读写正常。

7. 热点栏目测试

    显示正常。

    数据获取正常。

    排序正常。

8. 夜间模式测试

    显示正常。

### 使用手册

0. 初始界面

![](https://s1.ax1x.com/2023/03/13/ppMTpj0.png)

1. 登入网站

    使用功能前需要登录。登录入口位于右上角：

    ![](https://s1.ax1x.com/2023/03/13/ppMTPBT.png)

    点击 `Log In` 按钮以进行登录，点击后会弹出如下对话框。  
    对话框是可推拽的。

    ![](https://s1.ax1x.com/2023/03/13/ppMTe3R.png)

    提示账户未注册则自动注册，此时进行注册登录即可。这里以 `Mike:123456` 为例。

    ![](https://s1.ax1x.com/2023/03/13/ppMT1ED.png) ![](https://s1.ax1x.com/2023/03/13/ppMT3Ue.png)

    登入后即可正常使用所有功能。

    ![](https://s1.ax1x.com/2023/03/13/ppMTY8A.md.png)

2. 对话功能

    登录后点击 `Try it now` 按钮或上方的 `Chats -> Start a New Chat` 皆可打开一个新对话。

    ![](https://s1.ax1x.com/2023/03/13/ppMT4VU.png) ![](https://s1.ax1x.com/2023/03/13/ppMT7G9.png)

    由于最大连接数限制，如果服务器已满，将会提示 `Server is full.`。

    ![](https://s1.ax1x.com/2023/03/13/ppMTbx1.png)

    如果一切正常，将会直接进入聊天页面。

    ![](https://s1.ax1x.com/2023/03/13/ppM7pPH.png)

    在下方输入框键入文字后，点击 `Submit` 按钮，即可发送消息并得到 NLP 后推测的结果或者直接回复。

    ![](https://s1.ax1x.com/2023/03/13/ppM7Aqf.png)

    输入框大小可随输入内容动态调整。

    ![](https://s1.ax1x.com/2023/03/13/ppM7PxI.png)

3. 历史记录查询

    ![](https://s1.ax1x.com/2023/03/13/ppM7VZ8.png)

    点击 `Utilities -> View History` 即可查询历史记录。

    ![](https://s1.ax1x.com/2023/03/13/ppM7ZdS.png)

    可以进行排序，也可以使用右上方输入框进行过滤。

    ![](https://s1.ax1x.com/2023/03/13/ppM7lMq.png)

    点击 `Options` 栏中的 `Edit` 按钮，可以修改消息的分类。  
    对话框是可推拽的。

    ![](https://s1.ax1x.com/2023/03/13/ppM73LV.png)

4. 热点查询

    ![](https://img1.imgtp.com/2023/03/13/zCDIaz8R.png)

    点击 `Utilities -> View Hotspot` 即可查询历史记录。  
    可以进行排序。默认按热度（搜索次数）排序。

    ![](https://img1.imgtp.com/2023/03/13/9Tas3z8Z.png)

5. 历史聊天记录查看

    ![](https://img1.imgtp.com/2023/03/13/RGqfowlu.png)

    左侧聊天栏可以展开，点击不同的选项卡可以查看不同的聊天记录。

    ![](https://img1.imgtp.com/2023/03/13/ZJD87sGt.png)

    ![](https://img1.imgtp.com/2023/03/13/eEB0mwCW.png)

## 验收阶段

### 系统竣工报告

最终，整个工程已经可以完整运行，符合要求。以下是需求完成情况清单。

| 需求 | 已完成 |
| :---: | :---: |
| 自拖动 | √ |
| 自调整布局 | √ |
| 自动推荐补齐 | √ |
| 历史聊天记录分类 | √ |
| 区分不同输入方式 | √ |
| 使用 MySQL 数据库存放确切的聊天答案 | √ |
| 根据输入要求输出确切的答案 | √ |
| 不符合输入要求的问题做出判断并拒绝回答 | √ |
| 并发访问需求限制 | √ |
| 软件流程文档 | √ |
| 采用成熟的 JavaScript 框架 | √ |
| 热榜 | √ |
| 后端调用 Python 程序 NLP | √ |